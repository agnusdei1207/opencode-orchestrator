# 🧠 자율적 인지 및 능동적 에이전시 개선안 (Adaptive & Proactive Agency Plan)

## 1. 근본적 사고 결함 분석 (Core Reasoning Defect)
에이전트가 배경 작업(Background Task)을 실행한 후, 다음과 같은 **'사고의 오류'**에 빠짐:
- **오류:** "작업이 실행 중이니 결과가 나올 때까지 기다리는 것이 시스템에 가장 안전하다."
- **결과:** 실질적인 진전 없이 "모니터링 중"이라는 말만 반복하며 리소스와 토큰을 낭비함.
- **치명적 결과:** 반복적인 빈 답변으로 인해 시스템이 `No user message found` 에러를 발생시키며 붕괴함.

## 2. 해결을 위한 '사고 체계' 개선 (Improving the Thinking Framework)

### 2.1 '병렬 사고' 의무화 (Parallel Thinking Mandate)
배경 작업이 실행 중일 때, 에이전트는 단순히 기다리는 것이 아니라 다음 중 하나 이상의 **'능동적 사고'**를 수행해야 함:
1. **진단적 감사 (Diagnostic Audit):** "이 작업이 정말 잘 돌아가고 있나?" -> `check_background_task`로 로그 10줄 읽기.
2. **선제적 계획 (Speculative Planning):** "이 작업이 끝나면 다음에 무엇을 해야 하지?" -> 다음 단계의 파일 구조 설계 또는 코드 초안 작성.
3. **병렬 태스크 탐색:** "지금 돌아가는 작업과 상관없이 해결할 수 있는 다른 TODO가 있나?" -> 독립적인 서브 태스크 실행.

### 2.2 '정체 감지(Stagnation Detection)'의 지능적 활용
시스템이 정체를 감지했을 때, 단순한 경고가 아닌 **'사고의 전환점(Pivot Point)'**을 제공함:
- **메커니즘:** 정체 감지 시 에이전트의 현재 사고(Thinking) 컨텍스트를 강제로 리셋하고, **[진단적 회의론]** 모드를 주입함.
- **명령:** "당신의 현재 방식이 통하지 않고 있습니다. 지금 즉시 모든 전제를 의심하고 로그를 확인하여 다른 방법을 찾으십시오."

## 3. 올바른 수정안 확인 (Validation of Improvements)

| 기존 방식 (Passive) | 개선 방식 (Proactive) | 유효성 결과 |
| :--- | :--- | :--- |
| "작업 중이니 기다립니다." | "작업 로그를 확인하니 ~부분이 느립니다. 병렬로 다른 작업을 시작합니다." | **성공:** 정체 해소 |
| 무한 루프 후 시스템 다운 | 정체 감지 즉시 `STAGNATION_INTERVENTION` 주입으로 사고 리셋 | **성공:** 안정성 확보 |
| 수동적 감시 | `check_background_task`를 통한 실시간 피드백 루프 형성 | **성공:** 자율성 강화 |

## 4. 실행 지침 (Action Plan)
1. **프롬프트 엔진 수정:** `CONTINUE_INSTRUCTION`에 "대기 금지 및 병렬 사고" 규칙 추가.
2. **핸들러 강화:** `MissionLoopHandler`에서 정체 감지 시 에이전트에게 **'로그 분석 미션'**을 동적으로 부여.
3. **안전장치:** 빈 응답 감지 시 에이전트에게 "생각을 구체적으로 출력하라"는 가이드를 즉시 재주입.

---
**점검 결과:** 본 수정안은 에이전트의 타성적인 대기 습관을 근본적으로 교정하며, 시스템이 중단되는 엣지 케이스를 모두 커버하므로 **올바른 해결책**으로 판단됩니다.
